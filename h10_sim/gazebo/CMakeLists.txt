cmake_minimum_required(VERSION 3.5)

project(simple_auv)

get_filename_component(CMAKE_WORKSPACE_ROOT "${CMAKE_CURRENT_SOURCE_DIR}/.." ABSOLUTE)
set(CMAKE_INSTALL_PREFIX "${CMAKE_WORKSPACE_ROOT}/install")

message("${CMAKE_WORKSPACE_ROOT}")
message("${CMAKE_CURRENT_SOURCE_DIR}")
message( "${CMAKE_CURRENT_BINARY_DIR}")
message("CMAKE_INSTALL_PREFIX is: ${CMAKE_INSTALL_PREFIX}")

#======================================================================
# Install models, worlds, and hooks
message("Installing models, worlds, and hooks directories to share/${PROJECT_NAME}")

install(DIRECTORY
  models
  worlds  
  DESTINATION share/${PROJECT_NAME})
  
install(CODE "
file(WRITE \${CMAKE_INSTALL_PREFIX}/setup_custom.bash \"#!/bin/bash\\n\")
file(APPEND \${CMAKE_INSTALL_PREFIX}/setup_custom.bash \"# Source the default setup.bash generated by colcon\\n\")
file(APPEND \${CMAKE_INSTALL_PREFIX}/setup_custom.bash \"source \${CMAKE_INSTALL_PREFIX}/setup.bash\\n\")
file(APPEND \${CMAKE_INSTALL_PREFIX}/setup_custom.bash \"\\n# Append GZ_SIM_RESOURCE_PATH\\n\")
file(APPEND \${CMAKE_INSTALL_PREFIX}/setup_custom.bash \"export GZ_SIM_RESOURCE_PATH=\${CMAKE_INSTALL_PREFIX}/share/simple_auv/worlds:\${CMAKE_INSTALL_PREFIX}/share/simple_auv/models:\${CMAKE_INSTALL_PREFIX}/share/simple_auv/worlds/media/materials/scripts:\$GZ_SIM_RESOURCE_PATH\\n\")
file(APPEND \${CMAKE_INSTALL_PREFIX}/setup_custom.bash \"echo 'GZ_SIM_RESOURCE_PATH: \$GZ_SIM_RESOURCE_PATH'\\n\")
  ")





